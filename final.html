<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Final Destination</title>
<link rel="stylesheet" href="css/styles.css">
</head>

<body class="final">

<div class="container" id="finalContainer">
<h1>ğŸ’– Destination: Forever ğŸ’–</h1>

<p>
Through every cloud,
every melody,
every laugh,
and every mile flown â€”
I choose you.
Again.
And again.
And again.
</p>

<video id="loveVideo" controls class="love-video">
    <source src="media/vid.mp4" type="video/mp4">
    Your browser does not support the video tag.
</video>

<h2>Will You Be My Valentine?</h2>

<div style="margin-top:20px;">
<button id="yesBtn" class="button">YES â¤ï¸</button>
<button id="noBtn" class="button" style="background:gray;">No ğŸ˜¢</button>
</div>

<div class="nav-buttons" style="margin-top:30px;">
<a href="page8.html">â¬… Previous</a>
</div>

</div>

<script>
let yesBtn = document.getElementById("yesBtn");
let noBtn = document.getElementById("noBtn");

let clickCount = 0;

const funnyMessages = [
    "Are you sure? ğŸ¥º",
    "Really sure?? ğŸ˜­",
    "Be serious now ğŸ˜‚",
    "Captain doesn't accept that âœˆï¸",
    "System error... try again ğŸ’»",
    "Illegal choice detected ğŸš«",
    "Nice try, co-pilot ğŸ˜",
    "Okay this is getting awkward ğŸ‘€"
];

noBtn.style.position = "relative";

function moveButton() {
    const container = document.querySelector(".container");
    const containerRect = container.getBoundingClientRect();

    const maxX = containerRect.width - noBtn.offsetWidth;
    const maxY = containerRect.height - noBtn.offsetHeight;

    const randomX = Math.random() * maxX;
    const randomY = Math.random() * maxY;

    noBtn.style.position = "absolute";
    noBtn.style.left = randomX + "px";
    noBtn.style.top = randomY + "px";
}

function changeMessage() {
    clickCount++;

    if (clickCount <= funnyMessages.length) {
        noBtn.innerText = funnyMessages[clickCount - 1];
    }

    // After 8 clicks, remove NO completely
    if (clickCount >= 8) {
        noBtn.style.display = "none";
    }
}

/* -------------------------
   DESKTOP BEHAVIOR
------------------------- */

if (window.innerWidth > 768) {

    // Hover = run away
    noBtn.addEventListener("mouseenter", moveButton);

    // If clicked
    noBtn.addEventListener("click", changeMessage);
}

/* -------------------------
   MOBILE BEHAVIOR
------------------------- */

if (window.innerWidth <= 768) {

    noBtn.addEventListener("touchstart", function(e) {
        e.preventDefault();
        moveButton();
        changeMessage();
    });
}

/* -------------------------
   YES BUTTON
------------------------- */

yesBtn.addEventListener("click", function() {

    confetti({
        particleCount: 150,
        spread: 90,
        origin: { y: 0.6 }
    });

    document.getElementById("finalContainer").innerHTML = `
        <h1>She Said YES! â¤ï¸âœˆï¸ğŸ¶</h1>
        <p>
        Flight LOVE-214 is officially cleared for departure.
        Destination: Forever.
        Co-pilot secured.
        </p>
        <img src="media/us.png">
        <p>Happy Valentine's Day, my forever co-pilot ğŸ’•</p>
        <h1> The End... ğŸš€ğŸ’– </h1>`;
});
</script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</body>
</html>
